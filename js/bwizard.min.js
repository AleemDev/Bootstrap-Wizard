/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(g){}})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(e,f,g){var j,i,h=this.options[e];g=g||{};f=b.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();f.target=this.element[0];i=f.originalEvent;if(i){for(j in i){if(!(j in f)){f[j]=i[j]}}}this.element.trigger(f,g);return !(b.isFunction(h)&&h.call(this.element[0],f,g)===false||f.isDefaultPrevented())}}})(jQuery);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(a,b){a.widget("bootstrap.bwizard",{options:{autoPlay:false,delay:3000,loop:false,hideOption:{fade:true},showOption:{fade:true,duration:400},ajaxOptions:null,cache:false,cookie:null,stepHeaderTemplate:"",panelTemplate:"",spinner:"",backBtnText:"back",nextBtnText:"next",add:null,remove:null,activeIndexChanged:null,show:null,load:null,validating:null},_defaults:{stepHeaderTemplate:"<li>#{title}</li>",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>"},_create:function(){var c=this;c._pageLize(true)},_init:function(){var d=this.options,c=d.disabled;if(d.disabledState){this.disable();d.disabled=c}else{if(d.autoPlay){this.play()}}},_setOption:function(c,d){a.Widget.prototype._setOption.apply(this,arguments);switch(c){case"activeIndex":this.show(d);break;case"navButtons":this._createButtons();break;default:this._pageLize();break}},play:function(){var d=this.options,c=this,e;if(!this.element.data("intId.bwizard")){e=window.setInterval(function(){var f=d.activeIndex+1;if(f>=c.panels.length){if(d.loop){f=0}else{c.stop();return}}c.show(f)},d.delay);this.element.data("intId.bwizard",e)}},stop:function(){var c=this.element.data("intId.bwizard");if(c){window.clearInterval(c);this.element.removeData("intId.bwizard")}},_normalizeBlindOption:function(d){if(d.blind===b){d.blind=false}if(d.fade===b){d.fade=false}if(d.duration===b){d.duration=200}if(typeof d.duration==="string"){try{d.duration=parseInt(d.duration,10)}catch(c){d.duration=200}}},_createButtons:function(){var e=this,i=this.options,d,g,h,c=i.backBtnText,f=i.nextBtnText;this._removeButtons();if(i.navButtons==="none"){return}if(!this.buttons){d=i.navButtons;this.buttons=a("<div/>");this.buttons.addClass("bwizard-buttons");this.backBtn=a("<a href='#'><i class='icon-chevron-left'></i> "+c+"</a>").addClass("btn").addClass("btn-large").appendTo(this.buttons).bind({click:function(){e.back();return false}}).attr("role","button");this.nextBtn=a("<a href='#'>"+f+" <i class='icon-chevron-right icon-white'></i></a>").addClass("btn").addClass("btn-primary").addClass("btn-large").appendTo(this.buttons).bind({click:function(){e.next();return false}}).attr("role","button");this.buttons.appendTo(this.element)}},_removeButtons:function(){if(this.buttons){this.buttons.remove();this.buttons=b}},_pageLize:function(e){var c=this,d=this.options,g=/^#.+/;var f=false;this.list=this.element.children("ol,ul").eq(0);if(this.list&&this.list.length===0){this.list=null}if(this.list){if(this.list.get(0).tagName.toLowerCase()==="ol"){f=true}this.lis=a("li",this.list);a("li",this.list).each(function(){a(this).find(".badge").remove();var h=a(this).index()+1;a(this).contents().wrap('<span class="hidden-phone"/>');a(this).prepend('<span class="badge">'+h+"</span>");if(!f){a(this).find(".badge").addClass("visible-phone")}})}if(e){this.panels=a("> div",this.element);this.panels.each(function(j,k){var h=a(k).attr("src");if(h&&!g.test(h)){a.data(k,"load.bwizard",h.replace(/#.*$/,""))}});this.element.addClass("bwizard clearfix");if(this.list){this.list.addClass("bwizard-steps clearfix").attr("role","tablist").attr("role","tab")}this.container=a("<div/>");this.container.addClass("well");this.container.append(this.panels);this.container.appendTo(this.element);this.panels.attr("role","tabpanel");if(d.activeIndex===b){if(typeof d.activeIndex!=="number"&&d.cookie){d.activeIndex=parseInt(c._cookie(),10)}if(typeof d.activeIndex!=="number"&&this.panels.filter(".bwizard-activated").length){d.activeIndex=this.panels.index(this.panels.filter(".bwizard-activated"))}d.activeIndex=d.activeIndex||(this.panels.length?0:-1)}else{if(d.activeIndex===null){d.activeIndex=-1}}d.activeIndex=((d.activeIndex>=0&&this.panels[d.activeIndex])||d.activeIndex<0)?d.activeIndex:0;this.panels.addClass("hide").attr("aria-hidden",true);if(d.activeIndex>=0&&this.panels.length){this.panels.eq(d.activeIndex).removeClass("hide").addClass("bwizard-activated").attr("aria-hidden",false);this.load(d.activeIndex)}this._createButtons()}else{this.panels=a("> div",this.container);d.activeIndex=this.panels.index(this.panels.filter(".bwizard-activated"))}this._refreshStep();if(d.cookie){this._cookie(d.activeIndex,d.cookie)}if(d.cache===false){this.panels.removeData("cache.bwizard")}if(d.showOption===b||d.showOption===null){d.showOption={}}this._normalizeBlindOption(d.showOption);if(d.hideOption===b||d.hideOption===null){d.hideOption={}}this._normalizeBlindOption(d.hideOption);this.panels.unbind(".bwizard")},_refreshStep:function(){var c=this.options;if(this.lis){this.lis.removeClass("current").attr("aria-selected",false).find(".badge").removeClass("badge-inverse");if(c.activeIndex>=0&&c.activeIndex<=this.lis.length-1){if(this.lis){this.lis.eq(c.activeIndex).addClass("current").attr("aria-selected",true).find(".badge").addClass("badge-inverse")}}}if(this.buttons&&!c.loop){this.backBtn[c.activeIndex<=0?"addClass":"removeClass"]("disabled").attr("aria-disabled",c.activeIndex===0);this.nextBtn[c.activeIndex>=this.panels.length-1?"addClass":"removeClass"]("disabled").attr("aria-disabled",(c.activeIndex>=this.panels.length-1))}},_sanitizeSelector:function(c){return c.replace(/:/g,"\\:")},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name);return a.cookie.apply(null,[c].concat(a.makeArray(arguments)))},_ui:function(c){return{panel:c,index:this.panels.index(c)}},_removeSpinner:function(){var c=this.element.data("spinner.bwizard");if(c){this.element.removeData("spinner.bwizard");c.remove()}},_resetStyle:function(c){c.css({display:""});if(!a.support.opacity){c[0].style.removeAttribute("filter")}},destroy:function(){var c=this.options;this.abort();this.stop();this._removeButtons();this.element.unbind(".bwizard").removeClass(["bwizard","clearfix"].join(" ")).removeData("bwizard");if(this.list){this.list.removeClass("bwizard-steps clearfix").removeAttr("role")}if(this.lis){this.lis.removeClass("current").removeAttr("role");this.lis.each(function(){if(a.data(this,"destroy.bwizard")){a(this).remove()}else{a(this).removeAttr("aria-selected")}})}this.panels.each(function(){var d=a(this).unbind(".bwizard");a.each(["load","cache"],function(e,f){d.removeData(f+".bwizard")});if(a.data(this,"destroy.bwizard")){a(this).remove()}else{a(this).removeClass(["bwizard-activated","hide"].join(" ")).css({position:"",left:"",top:""}).removeAttr("aria-hidden")}});this.container.replaceWith(this.container.contents());if(c.cookie){this._cookie(null,c.cookie)}return this},add:function(d,g){if(d===b){d=this.panels.length}if(g===b){g="Step "+d}var c=this,f=this.options,e=a(f.panelTemplate||c._defaults.panelTemplate).data("destroy.bwizard",true),h;e.addClass("hide").attr("aria-hidden",true);if(d>=this.panels.length){if(this.panels.length>0){e.insertAfter(this.panels[this.panels.length-1])}else{e.appendTo(this.container)}}else{e.insertBefore(this.panels[d])}if(this.list&&this.lis){h=a((f.stepHeaderTemplate||c._defaults.stepHeaderTemplate).replace(/#\{title\}/g,g));h.addClass("ui-widget-header ui-corner-all ui-priority-secondary").data("destroy.bwizard",true);if(d>=this.lis.length){h.appendTo(this.list)}else{h.insertBefore(this.lis[d])}}this._pageLize();if(this.panels.length===1){f.activeIndex=0;h.addClass("ui-priority-primary");e.removeClass("hide").addClass("bwizard-activated").attr("aria-hidden",false);this.element.queue("bwizard",function(){c._trigger("show",null,c._ui(c.panels[0]))});this._refreshStep();this.load(0)}this._trigger("add",null,this._ui(this.panels[d]));return this},remove:function(c){var e=this.options,d=this.panels.eq(c).remove();this.lis.eq(c).remove();if(c<e.activeIndex){e.activeIndex--}this._pageLize();if(d.hasClass("bwizard-activated")&&this.panels.length>=1){this.show(c+(c<this.panels.length?0:-1))}this._trigger("remove",null,this._ui(d[0]));return this},_showPanel:function(f){var c=this,g=this.options,e=a(f),d;e.addClass("bwizard-activated");if((g.showOption.blind||g.showOption.fade)&&g.showOption.duration>0){d={duration:g.showOption.duration};if(g.showOption.blind){d.height="toggle"}if(g.showOption.fade){d.opacity="toggle"}e.hide().removeClass("hide").animate(d,g.showOption.duration||"normal",function(){c._resetStyle(e);c._trigger("show",null,c._ui(e[0]));c._removeSpinner();e.attr("aria-hidden",false);c._trigger("activeIndexChanged",null,c._ui(e[0]))})}else{e.removeClass("hide").attr("aria-hidden",false);c._trigger("show",null,c._ui(e[0]));c._removeSpinner();c._trigger("activeIndexChanged",null,c._ui(e[0]))}},_hidePanel:function(f){var d=this,g=this.options,c=a(f),e;c.removeClass("bwizard-activated");if((g.hideOption.blind||g.hideOption.fade)&&g.hideOption.duration>0){e={duration:g.hideOption.duration};if(g.hideOption.blind){e.height="toggle"}if(g.hideOption.fade){e.opacity="toggle"}c.animate(e,g.hideOption.duration||"normal",function(){c.addClass("hide").attr("aria-hidden",true);d._resetStyle(c);d.element.dequeue("bwizard")})}else{c.addClass("hide").attr("aria-hidden",true);this.element.dequeue("bwizard")}},show:function(f){if(f<0||f>=this.panels.length){return this}if(this.element.queue("bwizard").length>0){return this}var d=this,h=this.options,e=a.extend({},this._ui(this.panels[h.activeIndex])),c,g;e.nextIndex=f;e.nextPanel=this.panels[f];if(this._trigger("validating",null,e)===false){return this}c=this.panels.filter(":not(.hide)");g=this.panels.eq(f);h.activeIndex=f;this.abort();if(h.cookie){this._cookie(h.activeIndex,h.cookie)}this._refreshStep();if(g.length){if(c.length){this.element.queue("bwizard",function(){d._hidePanel(c)})}this.element.queue("bwizard",function(){d._showPanel(g)});this.load(f)}else{throw"Bootstrap Wizard: Mismatching fragment identifier."}return this},next:function(){var d=this.options,c=d.activeIndex+1;if(d.disabled){return false}if(d.loop){c=c%this.panels.length}if(c<this.panels.length){this.show(c);return true}return false},back:function(){var d=this.options,c=d.activeIndex-1;if(d.disabled){return false}if(d.loop){c=c<0?this.panels.length-1:c}if(c>=0){this.show(c);return true}return false},load:function(e){var c=this,h=this.options,f=this.panels.eq(e)[0],d=a.data(f,"load.bwizard"),g;this.abort();if(!d||this.element.queue("bwizard").length!==0&&a.data(f,"cache.bwizard")){this.element.dequeue("bwizard");return}if(h.spinner){g=this.element.data("spinner.bwizard");if(!g){g=a('<div class="modal" id="spinner" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"/>');g.html(h.spinner||c._defaults.spinner);g.appendTo(document.body);this.element.data("spinner.bwizard",g);g.modal()}}this.xhr=a.ajax(a.extend({},h.ajaxOptions,{url:d,dataType:"html",success:function(j,i){a(f).html(j);if(h.cache){a.data(f,"cache.bwizard",true)}c._trigger("load",null,c._ui(c.panels[e]));try{if(h.ajaxOptions&&h.ajaxOptions.success){h.ajaxOptions.success(j,i)}}catch(k){}},error:function(l,i,k){c._trigger("load",null,c._ui(c.panels[e]));try{if(h.ajaxOptions&&h.ajaxOptions.error){h.ajaxOptions.error(l,i,e,f)}}catch(j){}}}));c.element.dequeue("bwizard");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("bwizard",this.element.queue("bwizard").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._removeSpinner();return this},url:function(d,c){this.panels.eq(d).removeData("cache.bwizard").data("load.bwizard",c);return this},count:function(){return this.panels.length}})}(jQuery));